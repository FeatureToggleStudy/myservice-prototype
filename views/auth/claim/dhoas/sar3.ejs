<!DOCTYPE html>
<html class="js" lang="en">

<head>

  <title>Subsidy authoriation request | MyService</title>
  <%- include(partials+"components/layout/head") %>
</head>

<body class="uikit-body uikit-grid uikit-refactor">
  <noscript>
    <p role="alert">This website needs JavaScript to work properly.</p>
  </noscript>
  <nav class="uikit-skip-link">
    <a class="uikit-skip-link__link" href="#main-content">Skip to main content</a>
  </nav>
  <%- include(partials+"components/layout/header-topbar") %>
  <%- include(partials+"components/layout/header-nom-rep") %>

  <main id="main-content">
    <div class="section-feature border-bottom--mild margin-above--none margin-below--none padding-below">
      <div class="container margin-above--none">
        <h1 class="margin-above--none ss-align--center">
          <span class="heading">Occupancy</span>
        </h1>
      </div>
    </div>
    <div class="container">

      <div class="row">
        <div class="col-md-offset-1 col-md-10 col-lg-offset-2 col-lg-8">
          <div class="margin-above--extra margin-below--extra">

            <% 
          locals.el = {};
          locals.el.message = "<p>You must be occupying your subsidised property for DHOAS subsidy to commence.</p><p>I understand that subsidy may cease if I stop occupying the property within 12 months following the commencement of subsidy payments or the completion of building work.</p><p>If I am unable to occupy the home for the 12 month occupancy period, I understand that I must be approved for a shorter period of occupancy to be eligible for continued subsidy payments.</p><p>I also understand that I must apply for a reduced occupancy period within a reasonable period of time of vacating the DHOAS subsidised property.</p>"; 
          locals.el.optionalType = "content";
          %>
            <%- include(partials+"components/form-elements/notice", locals) %>

            <%- include(partials+"components/form-partials/radio", {
              label: "I declare that:",
              boxes: [
                {
                  text: "I (or I and my dependent/s) will be occupying the property",
                  toggle: "#date-will-commence"
                },
                {
                  text: "I (or I and my dependent/s) currently occupy the property",
                  toggle: "#date-commenced"
                },
                {
                  text: "My dependent/s will be occupying the property",
                  toggle: "#date-will-commence"
                },
                {
                  text: "My dependent/s currently occupy the property",
                  toggle: "#date-commenced"
                },
                {
                  text: "I will not be occupying the property until the completion of building work",
                  toggle: "#date-expected"
                }
              ]
            }) %>

            <div id="date-will-commence" hidden>
              <%- include(partials+"components/form-partials/date", {
                label: "Date occupancy will commence"
              }) %>
            </div>

            <div id="date-commenced" hidden>
              <%- include(partials+"components/form-partials/date", {
                label: "Date occupancy commenced"
              }) %>
            </div>

            <div id="date-expected" hidden>
              <%- include(partials+"components/form-partials/date", {
                label: "Expected occupancy start date"
              }) %>
            </div>

            <div class="form-group" id="lump-sum-previous-yes-div">
              <h2>Occupancy declaration</h2>
              <div style="border: 1px solid #d8d8d8; padding: 30px;">
                <%- include(partials+"components/form-partials/checkbox", {
                  modifiers: ["noMargins"],
                  boxes: [
                    "I understand that I (or my dependant/s) must occupy the subsidised property for 12 months from the commencement of subsidy payments."
                  ]
                }) %>
              </div>
            </div>

            <%- include(partials+"components/form-partials/yes_no", {
              label: "Do you currently hold a posting order which will prevent you from meeting the 12 month occupancy requirement?",
              yes_toggle: "#posting_order"
            }) %>

            <div id="posting_order" hidden>
              <%- include(partials+"components/form-partials/textarea", {
                label: "Provide details of the posting order:"
              }) %>
            </div>

            <%- include(partials+"components/form-partials/yes_no", {
              label: "Will the land or any building on the land be used for the purpose of carrying on a business, trade or profession?",
              yes_toggle: "#trade_profession"
            }) %>

            <div id="trade_profession" hidden>
              <%- include(partials+"components/form-partials/textarea", {
                label: "Describe the nature of the business, trade or profession:"
              }) %>
            </div>

            <div class="pagination margin-above--extra">
              <button class="uikit-btn uikit-btn--tertiary " onclick="window.location.href='/auth/claim/dhoas/sar2' ">Previous</button>
              <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '#open-modal'">Cancel application</button>
              <div class="floated">
                <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '/auth/claim'">Save and exit</button>
                <button class="uikit-btn btnNext" id="btnNext" onclick="window.location.href = '/auth/claim/dhoas/sar4'">Save and next</button>
              </div>
            </div>
            <%- include(partials+"content/modals/claims-cancel-modal") %>
          </div>

  </main>

  <%- include(partials+"components/layout/footer") %>
</body>

<script type="text/javascript">

  $(document).ready(() => {

    $("input:radio").prop("checked", false);

    $('input[name=occupy_understand]').change(function () {
      var occupy_understand = $('input[name=occupy_understand]:checked').val();
      if (occupy_understand == "yes") {
        $("#occupy_understand_no").hide("fast");
      } else {
        $("#occupy_understand_no").show("fast");
      }
    });

    $('input[name=posting_order]').change(function () {
      var mySelection = $('input[name=posting_order]:checked').val();
      if (mySelection == "yes") {
        $("#posting_order_explain").show("fast");
      } else {
        $("#posting_order_explain").hide("fast");
      }
    });

    $('input[name=using_for_work]').change(function () {
      var mySelection = $('input[name=using_for_work]:checked').val();
      if (mySelection == "yes") {
        $("#using_for_work_explain").show("fast");
      } else {
        $("#using_for_work_explain").hide("fast");
      }
    });

    $('input[name=occupancy_date]').change(function () {
      mySelection = $('input[name=occupancy_date]:checked').val();
      hideDates();
      console.log(mySelection)
      switch (mySelection) {
        case "date_a":
          $("#date_will_commence").show("fast");
          break;
        case "date_b":
          $("#date_commenced").show("fast");
          break;
        case "date_c":
          $("#date_will_commence").show("fast");
          break;
        case "date_d":
          $("#date_commenced").show("fast");
          break;
        case "date_e":
          $("#date_expected").show("fast");
          break;
        default:
      }
    });

    function hideDates() {
      $("#date_will_commence").hide();
      $("#date_commenced").hide();
      $("#date_expected").hide();
    }

  });

</script>

</html>
